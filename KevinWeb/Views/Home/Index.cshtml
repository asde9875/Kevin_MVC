@{
    ViewData["Title"] = "Home Page";
}

@model IEnumerable<Kevin.Models.Entities.ProductsEntity>

<style>
    /* ----------- Floating Sidebar Buttons ----------- */
    .side-buttons {
        position: fixed;
        top: 40%;
        left: 0;
        z-index: 1000;
        display: flex;
        flex-direction: column;
    }

    .side-link {
        color: white;
        padding: 6px 10px;
        margin: 2px 0;
        text-decoration: none;
        border-radius: 0 5px 5px 0;
        font-weight: bold;
        transition: background 0.3s ease;
        white-space: nowrap;
        font-size: 0.8rem;
        max-width: 130px;
    }


        .side-link:hover {
            opacity: 0.9;
            transform: translateX(5px);
        }

    /* ----------- Product Card Styles ----------- */
    .card:hover {
        transform: scale(1.05);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .card-img-top {
        height: 200px;
        width: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .card:hover .card-img-top {
        transform: scale(1.0);
    }

    .book-title {
        font-size: 0.95rem;
        font-weight: 600;
        text-transform: uppercase;
        height: 2.4em;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        line-height: 1.2em;
    }

    /* ----------- Carousel Image ----------- */
    .carousel-inner img {
        height: 300px;
        object-fit: cover;
    }

    .carousel-caption h5 {
        background-color: rgba(0,0,0,0.6);
        display: inline-block;
        padding: 8px 16px;
        border-radius: 5px;
    }


    .book-savings-wrapper {
        background-color: #fff;
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow: hidden;
    }

    .book-savings-title h5 {
        font-size: 1.1rem;
    }

    .book-savings-carousel {
        scroll-behavior: smooth;
        padding-bottom: 8px;
        margin: 0 10px;
        gap: 8px;
    }

    .book-savings-item {
        min-width: 160px;
        max-width: 160px;
        flex: 0 0 auto;
    }

        .book-savings-item img {
            background-color: #f5f5f5; /* light grey */
            border-radius: 20px; 
            padding: 5px;
            width: 120px;
            height: 120px;
            object-fit: contain;
        }

        .book-savings-item p {
            display: none;
        }


    /* Arrows */
    .carousel-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: white;
        border: none;
        font-size: 2rem;
        font-weight: bold;
        color: #555;
        z-index: 10;
        padding: 5px 10px;
        cursor: pointer;
        box-shadow: 0 0 6px rgba(0,0,0,0.2);
        border-radius: 5px;
    }

        .carousel-arrow:hover {
            background-color: #f3f3f3;
        }

    .left-arrow {
        left: 0;
    }

    .right-arrow {
        right: 0;
    }

</style>

<!-- 🌐 Floating Sidebar Buttons -->
<div class="side-buttons">
    <a href="/order-tracking" class="side-link bg-dark">📦 Track Order</a>
    <a href="/gift-cards" class="side-link bg-dark">🎁 Gift Cards</a>
    <a href="/reviews" class="side-link bg-dark">💬 Reviews</a>
    <a href="/blog" class="side-link bg-dark">📚 Blog</a>
    <a href="/about-us" class="side-link bg-dark">🧑‍💼 About Us</a>

    <!-- logo -->
    <a href="https://facebook.com" target="_blank" class="side-link" style="background-color: #3b5998;">
        <i class="fab fa-facebook-f me-2"></i> Facebook
    </a>
    <a href="https://instagram.com" target="_blank" class="side-link" style="background-color: #E1306C;">
        <i class="fab fa-instagram me-2"></i> Instagram
    </a>
    <a href="https://tiktok.com" target="_blank" class="side-link" style="background-color: #010101;">
        <i class="fab fa-tiktok me-2"></i> TikTok
    </a>
    <a href="https://linkedin.com" target="_blank" class="side-link" style="background-color: #0077b5;">
        <i class="fab fa-linkedin-in me-2"></i> LinkedIn
    </a>
</div>


<!-- 🎯 Eye-Catching Product Carousel -->
<div id="featuredCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
    <div class="carousel-inner rounded shadow">

        <div class="carousel-item active">
            <img src="/images/product/banner1.png" class="d-block w-100" alt="Banner 1">
            <div class="carousel-caption d-none d-md-block">
                <h5>🔥 Limited Time Deal! Get your favourite books up to 50% off</h5>
            </div>
        </div>

        <div class="carousel-item">
            <img src="/images/product/banner2.jpg" class="d-block w-100" alt="Banner 2">
            <div class="carousel-caption d-none d-md-block">
                <h5>🚀 New Arrivals: Discover the latest titles today!</h5>
            </div>
        </div>

        <div class="carousel-item">
            <img src="/images/product/banner3.jpg" class="d-block w-100" alt="Banner 3">
            <div class="carousel-caption d-none d-md-block">
                <h5>🌟 Editor’s Picks: Curated must-reads just for you</h5>
            </div>
        </div>

    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#featuredCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#featuredCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
    </button>
</div>

<!-- 📚 Savings Book Carousel with Arrows -->
<div class="book-savings-wrapper px-4 py-3 position-relative">
    <div class="book-savings-title mb-2 d-flex justify-content-between align-items-center">
        <h5 class="fw-bold m-0">Ways to save and explore books</h5>
        <a href="#" class="text-primary small fw-semibold">Become a Member</a>
    </div>

    <!-- Arrows -->
    <button class="carousel-arrow left-arrow" onclick="scrollCarousel('left')">&#10094;</button>
    <button class="carousel-arrow right-arrow" onclick="scrollCarousel('right')">&#10095;</button>

    <!-- Scrollable Content -->
    <div id="bookCarousel" class="book-savings-carousel d-flex overflow-auto gap-4">
        <div class="book-savings-item text-center">
            <img src="~/images/icons/deals.png" alt="Deals" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/outlet.png" alt="Outlet" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/subsave.png" alt="Subscribe & Save" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/renewed.png" alt="Used Books" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/coupons.png" alt="Coupons" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/save.png" alt="Buy More & Save" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/freedelivery.png" alt="Free Delivery" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/easyreturn.png" alt="Easy Return" />
        </div>
        <div class="book-savings-item text-center">
            <img src="~/images/icons/paymentoption.png" alt="Payment Option" />
        </div>
    </div>
</div>



<!-- 📚 Product Grid -->
<div class="row pb-3">
    @{
        int count = 0;
        int bannerIndex = 1;
        int maxBannerIndex = 1; // How many banners you have
    }

    @foreach (var product in Model)
    {
        if (count > 0 && count % 12 == 0)
        {
            <div class="col-12 my-3">
                <div class="d-flex gap-3 justify-content-center align-items-stretch">
                    <!-- 60% -->
                    <img src="@Url.Content($"~/images/product/banner-stream-{bannerIndex}a.png")"
                         class="rounded shadow"
                         style="width: 60%; max-height: 350px; object-fit: cover;"
                         alt="Streaming Ad Left @bannerIndex" />

                    <!-- 40% -->
                    <img src="@Url.Content($"~/images/product/banner-stream-{bannerIndex}b.png")"
                         class="rounded shadow"
                         style="width: 40%; max-height: 350px; object-fit: cover;"
                         alt="Streaming Ad Right @bannerIndex" />
                </div>
            </div>

            bannerIndex++;

            if (bannerIndex > maxBannerIndex)
            {
                bannerIndex = 1;
            }
        }

        <div class="col-lg-2 col-sm-6 col-6">
            <div class="row p-2">
                <div class="col-12 p-1">
                    <div class="card border-0 p-3 shadow border-top border-5 rounded">
                        @if (!string.IsNullOrEmpty(product.ImageUrl))
                        {
                            <img src="@product.ImageUrl" class="card-img-top rounded" />
                        }
                        else
                        {
                            <img src="https://placehold.co/500x600/png" class="card-img-top rounded" />
                        }

                        <div class="card-body pb-0">
                            <div class="pl-1">
                                <p class="card-title book-title text-dark text-center">@product.Title</p>
                                <p class="card-title text-warning text-center">by <b>@product.Author</b></p>
                            </div>

                            <div class="pl-1">
                                <p class="text-dark text-opacity-75 text-center mb-0">
                                    List Price: <span class="text-decoration-line-through">
                                        @product.ListPrice.ToString("c")
                                    </span>
                                </p>
                            </div>

                            <div class="pl-1">
                                <p class="text-dark text-opacity-75 text-center">
                                    As low as: <span>@product.Price100.ToString("c")</span>
                                </p>
                            </div>
                        </div>
                        <div>
                            <a asp-action="Details"
                               asp-route-productId="@product.Id"
                               class="btn btn-primary bg-gradient border-0 form-control">
                                Details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        count++;
    }
</div>


<script>
    function scrollCarousel(direction) {
        const carousel = document.getElementById("bookCarousel");
        const scrollAmount = 200;
        if (direction === 'left') {
            carousel.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        } else {
            carousel.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        }
    }
</script>